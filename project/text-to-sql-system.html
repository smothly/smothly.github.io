<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM ê¸°ë°˜ Text-to-SQL ì‹œìŠ¤í…œ | SeungHo Choi</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon-256x256.png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Prism.js for code highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        
        /* ë§ˆí¬ë‹¤ìš´ ìŠ¤íƒ€ì¼ë§ */
        .prose {
            max-width: none;
            color: #374151;
            line-height: 1.75;
        }
        
        .prose h1 {
            font-size: 2.5rem;
            font-weight: 800;
            color: #1f2937;
            margin-bottom: 2rem;
            margin-top: 3rem;
            padding-bottom: 0.75rem;
            border-bottom: 3px solid #3b82f6;
        }
        
        .prose h2 {
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 1.5rem;
            margin-top: 2.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e5e7eb;
            position: relative;
        }
        
        .prose h2::before {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 60px;
            height: 2px;
            background: #3b82f6;
        }
        
        .prose h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 1rem;
            margin-top: 2rem;
        }
        
        .prose h4 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #4b5563;
            margin-bottom: 0.75rem;
            margin-top: 1.5rem;
        }
        
        .prose p {
            margin-bottom: 1.5rem;
            color: #4b5563;
            line-height: 1.8;
        }
        
        .prose ul, .prose ol {
            margin-bottom: 1.5rem;
            padding-left: 1.5rem;
        }
        
        .prose li {
            margin-bottom: 0.5rem;
            color: #4b5563;
            line-height: 1.7;
        }
        
        .prose ul li {
            position: relative;
            list-style: none;
        }
        
        .prose ul li::before {
            content: 'â€¢';
            color: #3b82f6;
            font-weight: bold;
            position: absolute;
            left: -1rem;
        }
        
        .prose ol li {
            list-style: decimal;
            color: #4b5563;
        }
        
        .prose strong {
            font-weight: 600;
            color: #1f2937;
        }
        
        .prose em {
            font-style: italic;
            color: #6b7280;
        }
        
        .prose blockquote {
            border-left: 4px solid #3b82f6;
            padding-left: 1.5rem;
            margin: 2rem 0;
            background: #f8fafc;
            padding: 1.5rem;
            border-radius: 0.5rem;
            font-style: italic;
            color: #4b5563;
        }
        
        .prose code {
            background: #f1f5f9;
            color: #e11d48;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: 500;
            border: 1px solid #e2e8f0;
        }
        
        .prose pre {
            background: #1e293b !important;
            color: #e2e8f0 !important;
            padding: 1.5rem !important;
            border-radius: 0.75rem !important;
            overflow-x: auto !important;
            margin: 2rem 0 !important;
            border: 1px solid #334155 !important;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1) !important;
        }
        
        .prose pre code {
            background: transparent !important;
            color: inherit !important;
            padding: 0 !important;
            border: none !important;
            border-radius: 0 !important;
            font-size: 0.875rem !important;
        }
        
        .prose img {
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            margin: 2rem 0;
            max-width: 100%;
            height: auto;
        }
        
        .prose table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            background: white;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .prose th {
            background: #f8fafc;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .prose td {
            padding: 1rem;
            border-bottom: 1px solid #f3f4f6;
            color: #4b5563;
        }
        
        .prose hr {
            border: none;
            height: 2px;
            background: linear-gradient(to right, #3b82f6, #8b5cf6);
            margin: 3rem 0;
            border-radius: 1px;
        }
        
        /* íŠ¹ë³„í•œ ê°•ì¡° ë°•ìŠ¤ */
        .prose p:has(strong:first-child) {
            background: linear-gradient(135deg, #eff6ff 0%, #f0f9ff 100%);
            border-left: 4px solid #3b82f6;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            margin: 1.5rem 0;
        }
    </style>
</head>
<body class="bg-gray-50">
    
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <a href="/" class="text-xl font-bold text-gray-800 hover:text-blue-600 transition-colors">
                    <i class="fas fa-arrow-left mr-2"></i> SeungHo Choi
                </a>
                <div class="flex space-x-4">
                    <!-- GitHub ë§í¬ ì œê±°ë¨ -->
                </div>
            </div>
        </div>
    </nav>

    <!-- Project Header -->
    <section class="gradient-bg text-white py-20">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h1 class="text-4xl md:text-5xl font-bold mb-6 leading-tight">LLM ê¸°ë°˜ Text-to-SQL ì‹œìŠ¤í…œ</h1>
                <p class="text-xl text-white/90 mb-8 leading-relaxed">LangChainê³¼ OpenAI GPTë¥¼ í™œìš©í•œ ìì—°ì–´ ê¸°ë°˜ SQL ìƒì„± ì‹œìŠ¤í…œ êµ¬ì¶•. ë¹„ê°œë°œìë„ ì‰½ê²Œ ë°ì´í„° ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë„ë¡ í•˜ì—¬ ë°ì´í„° ì¶”ì¶œ ìš”ì²­ì„ ëŒ€í­ ê°ì†Œì‹œí‚¨ í˜ì‹ ì ì¸ ì†”ë£¨ì…˜</p>
                <div class="flex justify-center items-center space-x-8 text-white/80">
                    <span class="flex items-center">
                        <i class="fas fa-calendar mr-2"></i>2024.01 - 2024.03
                    </span>
                </div>
            </div>
        </div>
    </section>

    <!-- Project Content -->
    <section class="py-20">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            
            <!-- Tech Stack -->
            <div class="bg-white rounded-2xl p-8 shadow-lg mb-8 border border-gray-100">
                <h2 class="text-2xl font-bold mb-6 text-gray-800 flex items-center">
                    <i class="fas fa-tools mr-3 text-blue-600"></i>
                    ê¸°ìˆ  ìŠ¤íƒ
                </h2>
                <div class="flex flex-wrap gap-3">
                    
                    <span class="px-4 py-2 bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-800 rounded-full font-medium border border-blue-200 hover:shadow-md transition-shadow">
                        OpenAI GPT
                    </span>
                    
                    <span class="px-4 py-2 bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-800 rounded-full font-medium border border-blue-200 hover:shadow-md transition-shadow">
                        LangChain
                    </span>
                    
                    <span class="px-4 py-2 bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-800 rounded-full font-medium border border-blue-200 hover:shadow-md transition-shadow">
                        Chainlit
                    </span>
                    
                    <span class="px-4 py-2 bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-800 rounded-full font-medium border border-blue-200 hover:shadow-md transition-shadow">
                        FastAPI
                    </span>
                    
                    <span class="px-4 py-2 bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-800 rounded-full font-medium border border-blue-200 hover:shadow-md transition-shadow">
                        Langfuse
                    </span>
                    
                    <span class="px-4 py-2 bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-800 rounded-full font-medium border border-blue-200 hover:shadow-md transition-shadow">
                        PostgreSQL
                    </span>
                    
                </div>
            </div>

            <!-- Project Details -->
            <div class="bg-white rounded-2xl p-8 shadow-lg border border-gray-100">
                <div class="prose prose-lg max-w-none">
                    <h1>LLM ê¸°ë°˜ Text-to-SQL ì‹œìŠ¤í…œ</h1>
<h2>í”„ë¡œì íŠ¸ ê°œìš”</h2>
<p>LangChainê³¼ OpenAI GPTë¥¼ í™œìš©í•œ ìì—°ì–´ ê¸°ë°˜ SQL ìƒì„± ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ì—¬ ë¹„ê°œë°œìë„ ì‰½ê²Œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì •ë³´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” í˜ì‹ ì ì¸ ì†”ë£¨ì…˜ì„ ê°œë°œí–ˆìŠµë‹ˆë‹¤. ëŒ€í™”í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ë³µì¡í•œ SQL ì¿¼ë¦¬ë¥¼ ìì—°ì–´ë¡œ ë³€í™˜í•˜ì—¬ ë°ì´í„° ì ‘ê·¼ì„±ì„ íšê¸°ì ìœ¼ë¡œ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤.</p>
<p><strong>í•µì‹¬ ì„±ê³¼:</strong>
- ë°ì´í„° ì¶”ì¶œ ìš”ì²­ 40% ê°ì†Œë¡œ ì—”ì§€ë‹ˆì–´ ì—…ë¬´ íš¨ìœ¨ì„± ì¦ëŒ€
- ìì—°ì–´ â†’ SQL ë³€í™˜ ì •í™•ë„ 85% ë‹¬ì„±
- ëŒ€í™”í˜• ì¸í„°í˜ì´ìŠ¤ë¡œ ì‚¬ìš©ì ë§Œì¡±ë„ 95% ë‹¬ì„±
- í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ìœ¼ë¡œ ë„ë©”ì¸ íŠ¹í™” ì„±ëŠ¥ ìµœì í™”</p>
<h2>í”„ë¡œì íŠ¸ ëª©í‘œ</h2>
<h3>ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­</h3>
<ol>
<li><strong>ë°ì´í„° ë¯¼ì£¼í™”</strong>: ë¹„ê°œë°œìì˜ ì…€í”„ ì„œë¹„ìŠ¤ ë°ì´í„° ì ‘ê·¼ í™˜ê²½ êµ¬ì¶•</li>
<li><strong>ì—…ë¬´ íš¨ìœ¨ì„±</strong>: ë°˜ë³µì ì¸ ë°ì´í„° ì¶”ì¶œ ìš”ì²­ ì—…ë¬´ ìë™í™”</li>
<li><strong>ì˜ì‚¬ê²°ì • ì§€ì›</strong>: ì‹¤ì‹œê°„ ë°ì´í„° ì¡°íšŒë¥¼ í†µí•œ ë¹ ë¥¸ ì˜ì‚¬ê²°ì • ì§€ì›</li>
<li><strong>í•™ìŠµ íš¨ê³¼</strong>: SQL í•™ìŠµ ë„êµ¬ë¡œ í™œìš©í•˜ì—¬ ì¡°ì§ ì—­ëŸ‰ ê°•í™”</li>
</ol>
<h3>ê¸°ìˆ ì  ëª©í‘œ</h3>
<ul>
<li>LLM ê¸°ë°˜ ìì—°ì–´ ì´í•´ ë° SQL ìƒì„± ì‹œìŠ¤í…œ êµ¬ì¶•</li>
<li>ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìë™ ì¸ì‹ ë° ì ì‘í˜• ì¿¼ë¦¬ ìƒì„±</li>
<li>ëŒ€í™”í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•œ ì§ê´€ì ì¸ ì‚¬ìš©ì ê²½í—˜ ì œê³µ</li>
<li>í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ì„ í†µí•œ ë„ë©”ì¸ íŠ¹í™” ìµœì í™”</li>
</ul>
<h2>ê¸°ìˆ ì  ë„ì „ê³¼ í•´ê²° ê³¼ì •</h2>
<h3>1. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¤ê³„</h3>
<p><strong>ë„ì „ ê³¼ì œ:</strong>
- ë³µì¡í•œ ê²Œì„ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì˜ ì´í•´
- ìì—°ì–´ì˜ ëª¨í˜¸ì„±ê³¼ SQLì˜ ì •í™•ì„± ê°„ ê´´ë¦¬
- ì‹¤ì‹œê°„ ì‘ë‹µì„±ê³¼ ì •í™•ì„±ì˜ ê· í˜•</p>
<p><strong>í•´ê²° ë°©ì•ˆ:</strong></p>
<pre class="codehilite"><code>Text-to-SQL System Architecture
â”œâ”€â”€ Frontend (Chainlit Web Interface)
â”‚   â”œâ”€â”€ ëŒ€í™”í˜• ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ ì‹¤ì‹œê°„ ì¿¼ë¦¬ ê²°ê³¼ í‘œì‹œ
â”‚   â””â”€â”€ SQL ì½”ë“œ í•˜ì´ë¼ì´íŒ…
â”œâ”€â”€ Backend (FastAPI)
â”‚   â”œâ”€â”€ LangChain ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
â”‚   â”œâ”€â”€ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ê´€ë¦¬
â”‚   â””â”€â”€ ì¿¼ë¦¬ ê²€ì¦ ë° ì‹¤í–‰
â”œâ”€â”€ LLM Integration
â”‚   â”œâ”€â”€ OpenAI GPT-4 (ì£¼ ëª¨ë¸)
â”‚   â”œâ”€â”€ ìŠ¤í‚¤ë§ˆ ì¸ì‹ ì—ì´ì „íŠ¸
â”‚   â””â”€â”€ SQL ìƒì„± ë° ê²€ì¦ ì—ì´ì „íŠ¸
â””â”€â”€ Database Layer
    â”œâ”€â”€ PostgreSQL (ë©”íƒ€ë°ì´í„°)
    â”œâ”€â”€ Redshift (ë¶„ì„ DB)
    â””â”€â”€ Langfuse (ë¡œê¹… &amp; ë¶„ì„)
</code></pre>

<h3>2. LangChain ê¸°ë°˜ SQL ìƒì„± ì‹œìŠ¤í…œ</h3>
<p><strong>í•µì‹¬ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„:</strong></p>
<pre class="codehilite"><code class="language-python">from langchain.llms import OpenAI
from langchain.agents import create_sql_agent
from langchain.agents.agent_toolkits import SQLDatabaseToolkit
from langchain.sql_database import SQLDatabase
from langchain.prompts import PromptTemplate
from langchain.chains import LLMChain
import os

class GameDataSQLAgent:
    &quot;&quot;&quot;ê²Œì„ ë°ì´í„° íŠ¹í™” Text-to-SQL ì—ì´ì „íŠ¸&quot;&quot;&quot;

    def __init__(self, database_url: str, openai_api_key: str):
        self.database_url = database_url
        self.db = SQLDatabase.from_uri(database_url)

        # OpenAI LLM ì´ˆê¸°í™”
        self.llm = OpenAI(
            openai_api_key=openai_api_key,
            model_name=&quot;gpt-4&quot;,
            temperature=0.1,  # ì¼ê´€ì„±ì„ ìœ„í•´ ë‚®ì€ temperature
            max_tokens=2000
        )

        # SQL íˆ´í‚· ìƒì„±
        self.toolkit = SQLDatabaseToolkit(db=self.db, llm=self.llm)

        # ê²Œì„ ë„ë©”ì¸ íŠ¹í™” í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
        self.game_domain_prompt = self.create_game_domain_prompt()

        # SQL ì—ì´ì „íŠ¸ ìƒì„±
        self.agent = create_sql_agent(
            llm=self.llm,
            toolkit=self.toolkit,
            verbose=True,
            prompt=self.game_domain_prompt,
            max_iterations=5,
            early_stopping_method=&quot;generate&quot;
        )

    def create_game_domain_prompt(self):
        &quot;&quot;&quot;ê²Œì„ ë„ë©”ì¸ íŠ¹í™” í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿&quot;&quot;&quot;

        template = &quot;&quot;&quot;
ë‹¹ì‹ ì€ ê²Œì„ ë°ì´í„° ë¶„ì„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ìì—°ì–´ ì§ˆë¬¸ì„ ì •í™•í•œ SQL ì¿¼ë¦¬ë¡œ ë³€í™˜í•˜ì„¸ìš”.

ê²Œì„ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì •ë³´:
- users: ì‚¬ìš©ì ì •ë³´ (user_id, username, registration_date, country, level)
- game_sessions: ê²Œì„ ì„¸ì…˜ (session_id, user_id, start_time, end_time, game_mode)
- transactions: êµ¬ë§¤ ë‚´ì—­ (transaction_id, user_id, item_id, amount, currency, purchase_date)
- user_events: ì‚¬ìš©ì ì´ë²¤íŠ¸ (event_id, user_id, event_type, event_time, properties)
- items: ê²Œì„ ì•„ì´í…œ (item_id, item_name, item_type, price, rarity)

ì¤‘ìš”í•œ ê·œì¹™:
1. ë‚ ì§œ ì¡°ê±´ì´ ëª…ì‹œë˜ì§€ ì•Šìœ¼ë©´ ìµœê·¼ 30ì¼ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ì„¸ìš”
2. ì‚¬ìš©ì ìˆ˜ë¥¼ ì…€ ë•ŒëŠ” DISTINCTë¥¼ ì‚¬ìš©í•˜ì„¸ìš”
3. ë§¤ì¶œ ê´€ë ¨ ì§ˆë¬¸ì—ëŠ” currency='USD'ì¸ ë°ì´í„°ë§Œ ì‚¬ìš©í•˜ì„¸ìš”
4. ê²Œì„ ì„¸ì…˜ ì‹œê°„ì€ (end_time - start_time)ìœ¼ë¡œ ê³„ì‚°í•˜ì„¸ìš”
5. ê²°ê³¼ëŠ” ìµœëŒ€ 1000í–‰ìœ¼ë¡œ ì œí•œí•˜ì„¸ìš”

ì§ˆë¬¸: {question}

SQL ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ê¸° ì „ì— ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:
1. ì–´ë–¤ í…Œì´ë¸”ë“¤ì´ í•„ìš”í•œê°€?
2. ì–´ë–¤ ì¡°ê±´ë“¤ì´ í•„ìš”í•œê°€?
3. ì–´ë–¤ ì§‘ê³„ í•¨ìˆ˜ê°€ í•„ìš”í•œê°€?
4. ì •ë ¬ì´ë‚˜ ì œí•œì´ í•„ìš”í•œê°€?

SQL:
```sql
&quot;&quot;&quot;

        return PromptTemplate(
            template=template,
            input_variables=[&quot;question&quot;]
        )

    def generate_sql(self, question: str):
        &quot;&quot;&quot;ìì—°ì–´ ì§ˆë¬¸ì„ SQLë¡œ ë³€í™˜&quot;&quot;&quot;

        try:
            # ìŠ¤í‚¤ë§ˆ ì •ë³´ ì¶”ê°€
            schema_info = self.get_schema_info()
            enhanced_question = f&quot;&quot;&quot;
ìŠ¤í‚¤ë§ˆ ì •ë³´:
{schema_info}

ì‚¬ìš©ì ì§ˆë¬¸: {question}
&quot;&quot;&quot;

            # SQL ìƒì„±
            result = self.agent.run(enhanced_question)

            # ê²°ê³¼ íŒŒì‹± ë° ê²€ì¦
            sql_query = self.extract_sql_from_result(result)
            validated_sql = self.validate_sql(sql_query)

            return {
                'sql': validated_sql,
                'explanation': self.generate_explanation(validated_sql),
                'estimated_rows': self.estimate_result_size(validated_sql)
            }

        except Exception as e:
            return {
                'error': f&quot;SQL ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}&quot;,
                'suggestion': self.get_error_suggestion(question)
            }

    def get_schema_info(self):
        &quot;&quot;&quot;ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì •ë³´ ì¡°íšŒ&quot;&quot;&quot;

        schema_query = &quot;&quot;&quot;
        SELECT 
            table_name,
            column_name,
            data_type,
            is_nullable
        FROM information_schema.columns 
        WHERE table_schema = 'public'
        ORDER BY table_name, ordinal_position
        &quot;&quot;&quot;

        schema_result = self.db.run(schema_query)
        return self.format_schema_info(schema_result)

    def validate_sql(self, sql_query: str):
        &quot;&quot;&quot;ìƒì„±ëœ SQL ì¿¼ë¦¬ ê²€ì¦ ë° ë³´ì•ˆ ê²€ì‚¬&quot;&quot;&quot;

        # ìœ„í—˜í•œ í‚¤ì›Œë“œ ê²€ì‚¬
        dangerous_keywords = [
            'DROP', 'DELETE', 'UPDATE', 'INSERT', 
            'CREATE', 'ALTER', 'TRUNCATE', 'GRANT', 'REVOKE'
        ]

        upper_sql = sql_query.upper()
        for keyword in dangerous_keywords:
            if keyword in upper_sql:
                raise ValueError(f&quot;ë³´ì•ˆìƒ ìœ„í—˜í•œ í‚¤ì›Œë“œ ê°ì§€: {keyword}&quot;)

        # LIMIT ì ˆ ê°•ì œ ì¶”ê°€
        if 'LIMIT' not in upper_sql:
            sql_query += ' LIMIT 1000'

        return sql_query

    def execute_sql_safely(self, sql_query: str):
        &quot;&quot;&quot;ì•ˆì „í•œ SQL ì‹¤í–‰&quot;&quot;&quot;

        try:
            # ì¿¼ë¦¬ ì‹¤í–‰ ì‹œê°„ ì œí•œ (30ì´ˆ)
            import signal

            def timeout_handler(signum, frame):
                raise TimeoutError(&quot;ì¿¼ë¦¬ ì‹¤í–‰ ì‹œê°„ ì´ˆê³¼&quot;)

            signal.signal(signal.SIGALRM, timeout_handler)
            signal.alarm(30)

            # SQL ì‹¤í–‰
            result = self.db.run(sql_query)

            signal.alarm(0)  # íƒ€ì´ë¨¸ í•´ì œ

            return {
                'success': True,
                'data': result,
                'row_count': len(result) if isinstance(result, list) else 1
            }

        except TimeoutError:
            return {
                'success': False,
                'error': 'ì¿¼ë¦¬ ì‹¤í–‰ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤. ë” êµ¬ì²´ì ì¸ ì¡°ê±´ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.'
            }
        except Exception as e:
            return {
                'success': False,
                'error': f'ì¿¼ë¦¬ ì‹¤í–‰ ì˜¤ë¥˜: {str(e)}'
            }

class ConversationManager:
    &quot;&quot;&quot;ëŒ€í™”í˜• ì„¸ì…˜ ê´€ë¦¬&quot;&quot;&quot;

    def __init__(self, sql_agent: GameDataSQLAgent):
        self.sql_agent = sql_agent
        self.conversation_history = []
        self.context_memory = {}

    def process_message(self, user_message: str, session_id: str):
        &quot;&quot;&quot;ì‚¬ìš©ì ë©”ì‹œì§€ ì²˜ë¦¬ ë° ì‘ë‹µ ìƒì„±&quot;&quot;&quot;

        # ì»¨í…ìŠ¤íŠ¸ ì •ë³´ ì¶”ê°€
        enhanced_message = self.add_context(user_message, session_id)

        # SQL ìƒì„±
        sql_result = self.sql_agent.generate_sql(enhanced_message)

        if 'error' in sql_result:
            response = self.handle_error_response(sql_result, user_message)
        else:
            # SQL ì‹¤í–‰
            execution_result = self.sql_agent.execute_sql_safely(sql_result['sql'])
            response = self.format_success_response(sql_result, execution_result)

        # ëŒ€í™” ê¸°ë¡ ì €ì¥
        self.save_conversation(session_id, user_message, response)

        return response

    def add_context(self, message: str, session_id: str):
        &quot;&quot;&quot;ì´ì „ ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ë¥¼ í˜„ì¬ ë©”ì‹œì§€ì— ì¶”ê°€&quot;&quot;&quot;

        recent_context = self.get_recent_context(session_id, limit=3)

        if recent_context:
            context_str = &quot;\n&quot;.join([
                f&quot;ì´ì „ ì§ˆë¬¸: {ctx['question']}&quot;
                for ctx in recent_context
            ])

            enhanced_message = f&quot;&quot;&quot;
ì´ì „ ëŒ€í™” ì»¨í…ìŠ¤íŠ¸:
{context_str}

í˜„ì¬ ì§ˆë¬¸: {message}
&quot;&quot;&quot;
            return enhanced_message

        return message

    def format_success_response(self, sql_result, execution_result):
        &quot;&quot;&quot;ì„±ê³µì ì¸ ì‘ë‹µ í¬ë§·íŒ…&quot;&quot;&quot;

        if execution_result['success']:
            response = {
                'type': 'success',
                'sql': sql_result['sql'],
                'explanation': sql_result['explanation'],
                'data': execution_result['data'],
                'row_count': execution_result['row_count'],
                'suggestions': self.generate_follow_up_suggestions(sql_result['sql'])
            }
        else:
            response = {
                'type': 'execution_error',
                'sql': sql_result['sql'],
                'error': execution_result['error'],
                'suggestions': ['ë” êµ¬ì²´ì ì¸ ì¡°ê±´ì„ ì¶”ê°€í•´ë³´ì„¸ìš”', 'ë‚ ì§œ ë²”ìœ„ë¥¼ ì¤„ì—¬ë³´ì„¸ìš”']
            }

        return response
</code></pre>

<h3>3. Chainlit ê¸°ë°˜ ëŒ€í™”í˜• ì¸í„°í˜ì´ìŠ¤</h3>
<p><strong>ì‚¬ìš©ì ì¹œí™”ì  ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„:</strong></p>
<pre class="codehilite"><code class="language-python">import chainlit as cl
import pandas as pd
import plotly.express as px
import plotly.graph_objects as go

@cl.on_chat_start
async def start():
    &quot;&quot;&quot;ì±„íŒ… ì„¸ì…˜ ì‹œì‘ì‹œ ì´ˆê¸°í™”&quot;&quot;&quot;

    # SQL ì—ì´ì „íŠ¸ ì´ˆê¸°í™”
    sql_agent = GameDataSQLAgent(
        database_url=os.getenv(&quot;DATABASE_URL&quot;),
        openai_api_key=os.getenv(&quot;OPENAI_API_KEY&quot;)
    )

    conversation_manager = ConversationManager(sql_agent)

    # ì„¸ì…˜ì— ì €ì¥
    cl.user_session.set(&quot;conversation_manager&quot;, conversation_manager)

    # í™˜ì˜ ë©”ì‹œì§€
    welcome_message = &quot;&quot;&quot;
ğŸ® **ê²Œì„ ë°ì´í„° ë¶„ì„ AI ì–´ì‹œìŠ¤í„´íŠ¸**ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!

ì €ëŠ” ìì—°ì–´ë¡œ ì§ˆë¬¸í•˜ì‹œë©´ SQL ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰í•´ë“œë¦¬ëŠ” AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.

**ì˜ˆì‹œ ì§ˆë¬¸ë“¤:**
- &quot;ìµœê·¼ 7ì¼ê°„ ì¼ë³„ ì‹ ê·œ ì‚¬ìš©ì ìˆ˜ëŠ”?&quot;
- &quot;ê°€ì¥ ì¸ê¸° ìˆëŠ” ì•„ì´í…œ top 10ì€?&quot;
- &quot;êµ­ê°€ë³„ í‰ê·  ì„¸ì…˜ ì‹œê°„ì„ ì•Œë ¤ì¤˜&quot;
- &quot;ì§€ë‚œ ë‹¬ ë§¤ì¶œì´ ê°€ì¥ ë†’ì€ ì‚¬ìš©ìëŠ”?&quot;

ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ë¬¼ì–´ë³´ì„¸ìš”! ğŸš€
&quot;&quot;&quot;

    await cl.Message(content=welcome_message).send()

@cl.on_message
async def main(message: cl.Message):
    &quot;&quot;&quot;ë©”ì‹œì§€ ì²˜ë¦¬ ë©”ì¸ í•¨ìˆ˜&quot;&quot;&quot;

    conversation_manager = cl.user_session.get(&quot;conversation_manager&quot;)

    # ë¡œë”© ë©”ì‹œì§€ í‘œì‹œ
    loading_msg = cl.Message(content=&quot;ğŸ¤” ì§ˆë¬¸ì„ ë¶„ì„í•˜ê³  SQLì„ ìƒì„±í•˜ëŠ” ì¤‘...&quot;)
    await loading_msg.send()

    try:
        # ë©”ì‹œì§€ ì²˜ë¦¬
        response = conversation_manager.process_message(
            message.content, 
            cl.user_session.get(&quot;id&quot;)
        )

        # ë¡œë”© ë©”ì‹œì§€ ì œê±°
        await loading_msg.remove()

        if response['type'] == 'success':
            await handle_success_response(response)
        else:
            await handle_error_response(response)

    except Exception as e:
        await loading_msg.remove()
        await cl.Message(
            content=f&quot;âŒ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}&quot;
        ).send()

async def handle_success_response(response):
    &quot;&quot;&quot;ì„±ê³µ ì‘ë‹µ ì²˜ë¦¬&quot;&quot;&quot;

    # SQL ì½”ë“œ í‘œì‹œ
    sql_element = cl.Code(
        name=&quot;ìƒì„±ëœ SQL&quot;,
        content=response['sql'],
        language=&quot;sql&quot;
    )

    # ì„¤ëª… ë©”ì‹œì§€
    explanation_msg = f&quot;&quot;&quot;
âœ… **ì¿¼ë¦¬ ìƒì„± ì™„ë£Œ!**

**ì„¤ëª…:** {response['explanation']}

**ê²°ê³¼:** {response['row_count']}ê°œ í–‰ ì¡°íšŒë¨
&quot;&quot;&quot;

    await cl.Message(
        content=explanation_msg,
        elements=[sql_element]
    ).send()

    # ë°ì´í„° í…Œì´ë¸” í‘œì‹œ
    if response['data']:
        df = pd.DataFrame(response['data'])

        # ë°ì´í„° í…Œì´ë¸”
        table_element = cl.DataFrame(
            name=&quot;ì¿¼ë¦¬ ê²°ê³¼&quot;,
            content=df.head(50),  # ìµœëŒ€ 50í–‰ í‘œì‹œ
            display=&quot;inline&quot;
        )

        await cl.Message(
            content=&quot;ğŸ“Š **ì¿¼ë¦¬ ê²°ê³¼:**&quot;,
            elements=[table_element]
        ).send()

        # ë°ì´í„° ì‹œê°í™” (ì ì ˆí•œ ê²½ìš°)
        chart = await create_chart_if_applicable(df)
        if chart:
            await cl.Message(
                content=&quot;ğŸ“ˆ **ë°ì´í„° ì‹œê°í™”:**&quot;,
                elements=[chart]
            ).send()

    # í›„ì† ì§ˆë¬¸ ì œì•ˆ
    suggestions = response.get('suggestions', [])
    if suggestions:
        suggestion_text = &quot;ğŸ’¡ **ê´€ë ¨ ì§ˆë¬¸ ì œì•ˆ:**\n&quot; + &quot;\n&quot;.join([
            f&quot;â€¢ {suggestion}&quot; for suggestion in suggestions
        ])

        await cl.Message(content=suggestion_text).send()

async def create_chart_if_applicable(df):
    &quot;&quot;&quot;ë°ì´í„°ì— ì í•©í•œ ì°¨íŠ¸ ìë™ ìƒì„±&quot;&quot;&quot;

    if len(df.columns) &lt; 2:
        return None

    # ìˆ«ì ì»¬ëŸ¼ê³¼ ì¹´í…Œê³ ë¦¬ ì»¬ëŸ¼ ì‹ë³„
    numeric_cols = df.select_dtypes(include=['number']).columns.tolist()
    categorical_cols = df.select_dtypes(include=['object', 'category']).columns.tolist()

    if len(numeric_cols) &gt;= 1 and len(categorical_cols) &gt;= 1:
        # ë§‰ëŒ€ ì°¨íŠ¸ ìƒì„±
        fig = px.bar(
            df.head(20),  # ìµœëŒ€ 20ê°œ í•­ëª©
            x=categorical_cols[0],
            y=numeric_cols[0],
            title=f&quot;{categorical_cols[0]}ë³„ {numeric_cols[0]}&quot;
        )

        fig.update_layout(
            xaxis_title=categorical_cols[0],
            yaxis_title=numeric_cols[0],
            showlegend=False
        )

        return cl.Plotly(name=&quot;chart&quot;, figure=fig, display=&quot;inline&quot;)

    elif len(numeric_cols) &gt;= 2:
        # ìŠ¤ìºí„° í”Œë¡¯ ìƒì„±
        fig = px.scatter(
            df.head(100),
            x=numeric_cols[0],
            y=numeric_cols[1],
            title=f&quot;{numeric_cols[0]} vs {numeric_cols[1]}&quot;
        )

        return cl.Plotly(name=&quot;chart&quot;, figure=fig, display=&quot;inline&quot;)

    return None

@cl.on_chat_end
async def end():
    &quot;&quot;&quot;ì±„íŒ… ì„¸ì…˜ ì¢…ë£Œì‹œ ì •ë¦¬&quot;&quot;&quot;

    # ì„¸ì…˜ í†µê³„ ë¡œê¹…
    conversation_manager = cl.user_session.get(&quot;conversation_manager&quot;)
    if conversation_manager:
        session_stats = conversation_manager.get_session_statistics()
        print(f&quot;ì„¸ì…˜ í†µê³„: {session_stats}&quot;)

# Chainlit ì•± ì‹¤í–‰
if __name__ == &quot;__main__&quot;:
    cl.run()
</code></pre>

<h3>4. í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ë° ìµœì í™”</h3>
<p><strong>ë„ë©”ì¸ íŠ¹í™” í”„ë¡¬í”„íŠ¸ ìµœì í™”:</strong></p>
<pre class="codehilite"><code class="language-python">class PromptOptimizer:
    &quot;&quot;&quot;í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ë° ìµœì í™”&quot;&quot;&quot;

    def __init__(self):
        self.prompt_templates = {}
        self.performance_metrics = {}

    def create_specialized_prompts(self):
        &quot;&quot;&quot;ìš©ë„ë³„ íŠ¹í™” í”„ë¡¬í”„íŠ¸ ìƒì„±&quot;&quot;&quot;

        # ë§¤ì¶œ ë¶„ì„ íŠ¹í™” í”„ë¡¬í”„íŠ¸
        self.prompt_templates['revenue'] = &quot;&quot;&quot;
ë‹¹ì‹ ì€ ê²Œì„ ë§¤ì¶œ ë¶„ì„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë‹¤ìŒ ê·œì¹™ì„ ë”°ë¥´ì„¸ìš”:

1. ë§¤ì¶œ ê³„ì‚°ì‹œ currency='USD'ì¸ ê±°ë˜ë§Œ í¬í•¨
2. í™˜ë¶ˆëœ ê±°ë˜ëŠ” amount &lt; 0 ìœ¼ë¡œ í‘œì‹œë¨
3. ì¼ë³„ ë§¤ì¶œì€ purchase_date ê¸°ì¤€ìœ¼ë¡œ GROUP BY
4. ë§¤ì¶œ ì„±ì¥ë¥  ê³„ì‚°ì‹œ ì „ë…„/ì „ì›” ë™ê¸° ëŒ€ë¹„ ì‚¬ìš©

ì§ˆë¬¸: {question}

ì¤‘ìš”í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­:
- ARPU (Average Revenue Per User): ì´ ë§¤ì¶œ / í™œì„± ì‚¬ìš©ì ìˆ˜
- ARPPU (Average Revenue Per Paying User): ì´ ë§¤ì¶œ / ê²°ì œ ì‚¬ìš©ì ìˆ˜
- LTV (Life Time Value): ì‚¬ìš©ìë‹¹ ì˜ˆìƒ ì´ ë§¤ì¶œ
&quot;&quot;&quot;

        # ì‚¬ìš©ì í–‰ë™ ë¶„ì„ íŠ¹í™” í”„ë¡¬í”„íŠ¸
        self.prompt_templates['user_behavior'] = &quot;&quot;&quot;
ë‹¹ì‹ ì€ ê²Œì„ ì‚¬ìš©ì í–‰ë™ ë¶„ì„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë‹¤ìŒì„ ê³ ë ¤í•˜ì„¸ìš”:

1. í™œì„± ì‚¬ìš©ì: ìµœê·¼ 7ì¼ ë‚´ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì
2. ì‹ ê·œ ì‚¬ìš©ì: registration_dateê°€ ì¡°íšŒ ê¸°ê°„ ë‚´ì¸ ì‚¬ìš©ì
3. ì´íƒˆ ì‚¬ìš©ì: ìµœê·¼ 30ì¼ê°„ ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ì
4. ì„¸ì…˜ ì‹œê°„: end_time - start_time (ì´ˆ ë‹¨ìœ„)

ì§ˆë¬¸: {question}

í•µì‹¬ ì§€í‘œ:
- DAU (Daily Active Users): ì¼ë³„ í™œì„± ì‚¬ìš©ì
- MAU (Monthly Active Users): ì›”ë³„ í™œì„± ì‚¬ìš©ì
- Retention Rate: ì‹ ê·œ ì‚¬ìš©ìì˜ ì¬ë°©ë¬¸ìœ¨
- Session Duration: í‰ê·  ì„¸ì…˜ ì§€ì† ì‹œê°„
&quot;&quot;&quot;

        # ì•„ì´í…œ/ì¸ë²¤í† ë¦¬ ë¶„ì„ íŠ¹í™” í”„ë¡¬í”„íŠ¸
        self.prompt_templates['items'] = &quot;&quot;&quot;
ë‹¹ì‹ ì€ ê²Œì„ ì•„ì´í…œ ë° ì¸ë²¤í† ë¦¬ ë¶„ì„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤:

1. ì•„ì´í…œ ë“±ê¸‰: common, rare, epic, legendary ìˆœì„œ
2. ì•„ì´í…œ ì¹´í…Œê³ ë¦¬: weapon, armor, consumable, decoration
3. ì¸ê¸°ë„ ì¸¡ì •: êµ¬ë§¤ íšŸìˆ˜, ë§¤ì¶œ ê¸°ì—¬ë„, ì‚¬ìš© ë¹ˆë„
4. ê°€ê²© ë¶„ì„: USD ê¸°ì¤€ ê°€ê²©ëŒ€ë³„ ë¶„ë¥˜

ì§ˆë¬¸: {question}

ë¶„ì„ í¬ì¸íŠ¸:
- Best Sellers: íŒë§¤ëŸ‰ ê¸°ì¤€ ì¸ê¸° ì•„ì´í…œ
- Revenue Drivers: ë§¤ì¶œ ê¸°ì—¬ë„ ë†’ì€ ì•„ì´í…œ
- Price Elasticity: ê°€ê²© ë³€í™”ì— ë”°ë¥¸ ìˆ˜ìš” ë³€í™”
&quot;&quot;&quot;

    def select_optimal_prompt(self, question: str):
        &quot;&quot;&quot;ì§ˆë¬¸ ë‚´ìš©ì— ë”°ë¥¸ ìµœì  í”„ë¡¬í”„íŠ¸ ì„ íƒ&quot;&quot;&quot;

        # í‚¤ì›Œë“œ ê¸°ë°˜ ë¶„ë¥˜
        revenue_keywords = ['ë§¤ì¶œ', 'ìˆ˜ìµ', 'revenue', 'ê²°ì œ', 'êµ¬ë§¤', 'arpu', 'arppu']
        user_keywords = ['ì‚¬ìš©ì', 'ìœ ì €', 'user', 'í™œì„±', 'dau', 'mau', 'ì´íƒˆ', 'retention']
        item_keywords = ['ì•„ì´í…œ', 'item', 'ìƒí’ˆ', 'ì¸ë²¤í† ë¦¬', 'ì¥ë¹„', 'ë“±ê¸‰']

        question_lower = question.lower()

        if any(keyword in question_lower for keyword in revenue_keywords):
            return self.prompt_templates['revenue']
        elif any(keyword in question_lower for keyword in user_keywords):
            return self.prompt_templates['user_behavior']
        elif any(keyword in question_lower for keyword in item_keywords):
            return self.prompt_templates['items']
        else:
            return self.prompt_templates.get('general', self.create_general_prompt())

    def evaluate_prompt_performance(self, prompt_type: str, accuracy: float, execution_time: float):
        &quot;&quot;&quot;í”„ë¡¬í”„íŠ¸ ì„±ëŠ¥ í‰ê°€ ë° ê¸°ë¡&quot;&quot;&quot;

        if prompt_type not in self.performance_metrics:
            self.performance_metrics[prompt_type] = {
                'accuracy_scores': [],
                'execution_times': [],
                'usage_count': 0
            }

        metrics = self.performance_metrics[prompt_type]
        metrics['accuracy_scores'].append(accuracy)
        metrics['execution_times'].append(execution_time)
        metrics['usage_count'] += 1

        # ì„±ëŠ¥ í†µê³„ ê³„ì‚°
        avg_accuracy = sum(metrics['accuracy_scores']) / len(metrics['accuracy_scores'])
        avg_execution_time = sum(metrics['execution_times']) / len(metrics['execution_times'])

        return {
            'prompt_type': prompt_type,
            'average_accuracy': avg_accuracy,
            'average_execution_time': avg_execution_time,
            'total_usage': metrics['usage_count']
        }
</code></pre>

<h3>5. Langfuse í†µí•© ë¡œê¹… ë° ë¶„ì„</h3>
<p><strong>LLM ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§:</strong></p>
<pre class="codehilite"><code class="language-python">from langfuse import Langfuse
from langfuse.decorators import langfuse_context, observe

class LangfuseIntegration:
    &quot;&quot;&quot;Langfuseë¥¼ í†µí•œ LLM ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§&quot;&quot;&quot;

    def __init__(self, public_key: str, secret_key: str):
        self.langfuse = Langfuse(
            public_key=public_key,
            secret_key=secret_key
        )

    @observe()
    def track_sql_generation(self, user_question: str, generated_sql: str, 
                           execution_success: bool, execution_time: float):
        &quot;&quot;&quot;SQL ìƒì„± ê³¼ì • ì¶”ì &quot;&quot;&quot;

        # ì„¸ì…˜ ìƒì„±
        trace = self.langfuse.trace(
            name=&quot;text-to-sql-generation&quot;,
            input={'user_question': user_question},
            output={'sql': generated_sql, 'success': execution_success},
            metadata={
                'execution_time': execution_time,
                'model': 'gpt-4',
                'domain': 'game_analytics'
            }
        )

        # ë‹¨ê³„ë³„ ìŠ¤íŒ¬ ìƒì„±
        with langfuse_context.update_current_trace(
            name=&quot;sql-generation&quot;,
            input={'question': user_question}
        ):
            # í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ë‹¨ê³„
            langfuse_context.update_current_span(
                name=&quot;prompt-engineering&quot;,
                input={'raw_question': user_question},
                output={'enhanced_prompt': 'enhanced_question'}
            )

            # LLM í˜¸ì¶œ ë‹¨ê³„
            langfuse_context.update_current_span(
                name=&quot;llm-call&quot;,
                model=&quot;gpt-4&quot;,
                input={'prompt': 'enhanced_question'},
                output={'sql': generated_sql}
            )

            # SQL ê²€ì¦ ë‹¨ê³„
            langfuse_context.update_current_span(
                name=&quot;sql-validation&quot;,
                input={'sql': generated_sql},
                output={'valid': execution_success}
            )

        return trace

    def analyze_performance_trends(self, days=30):
        &quot;&quot;&quot;ì„±ëŠ¥ íŠ¸ë Œë“œ ë¶„ì„&quot;&quot;&quot;

        # Langfuse APIë¥¼ í†µí•œ ë°ì´í„° ì¡°íšŒ
        traces = self.langfuse.get_traces(
            limit=1000,
            from_timestamp=datetime.now() - timedelta(days=days)
        )

        # ì„±ëŠ¥ ë¶„ì„
        performance_data = []
        for trace in traces:
            if trace.name == &quot;text-to-sql-generation&quot;:
                performance_data.append({
                    'timestamp': trace.timestamp,
                    'success': trace.output.get('success', False),
                    'execution_time': trace.metadata.get('execution_time', 0),
                    'user_question': trace.input.get('user_question', ''),
                    'model': trace.metadata.get('model', 'unknown')
                })

        # í†µê³„ ê³„ì‚°
        df = pd.DataFrame(performance_data)

        analytics = {
            'total_queries': len(df),
            'success_rate': df['success'].mean() * 100,
            'avg_execution_time': df['execution_time'].mean(),
            'daily_usage': df.groupby(df['timestamp'].dt.date).size().to_dict(),
            'common_failures': self.analyze_failure_patterns(df[df['success'] == False])
        }

        return analytics

    def generate_improvement_recommendations(self, analytics):
        &quot;&quot;&quot;ì„±ëŠ¥ ê°œì„  ê¶Œì¥ì‚¬í•­ ìƒì„±&quot;&quot;&quot;

        recommendations = []

        # ì„±ê³µë¥  ê¸°ë°˜ ê¶Œì¥ì‚¬í•­
        if analytics['success_rate'] &lt; 85:
            recommendations.append({
                'category': 'accuracy',
                'issue': f&quot;ì„±ê³µë¥ ì´ {analytics['success_rate']:.1f}%ë¡œ ë‚®ìŒ&quot;,
                'recommendation': &quot;í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ê°œì„  ë° ìŠ¤í‚¤ë§ˆ ì •ë³´ ë³´ê°• í•„ìš”&quot;
            })

        # ì‹¤í–‰ ì‹œê°„ ê¸°ë°˜ ê¶Œì¥ì‚¬í•­
        if analytics['avg_execution_time'] &gt; 10:
            recommendations.append({
                'category': 'performance',
                'issue': f&quot;í‰ê·  ì‹¤í–‰ ì‹œê°„ì´ {analytics['avg_execution_time']:.1f}ì´ˆë¡œ ëŠë¦¼&quot;,
                'recommendation': &quot;ì¿¼ë¦¬ ìµœì í™” ë° ì¸ë±ìŠ¤ ê²€í†  í•„ìš”&quot;
            })

        return recommendations
</code></pre>

<h2>ì„±ê³¼ ë° ì„íŒ©íŠ¸</h2>
<h3>ì •ëŸ‰ì  ì„±ê³¼</h3>
<ul>
<li><strong>ì—…ë¬´ íš¨ìœ¨ì„±</strong>: ë°ì´í„° ì¶”ì¶œ ìš”ì²­ 40% ê°ì†Œ (ì›” í‰ê·  150ê±´ â†’ 90ê±´)</li>
<li><strong>ì‘ë‹µ ì‹œê°„</strong>: ê¸°ì¡´ ìˆ˜ë™ ì²˜ë¦¬ í‰ê·  2ì‹œê°„ â†’ AI ì‹œìŠ¤í…œ í‰ê·  30ì´ˆ</li>
<li><strong>SQL ìƒì„± ì •í™•ë„</strong>: 85% ì •í™•í•œ ì¿¼ë¦¬ ìƒì„± (ìˆ˜ì‘ì—… ê²€ì¦ ê¸°ì¤€)</li>
<li><strong>ì‚¬ìš©ì ë§Œì¡±ë„</strong>: 95% ì‚¬ìš©ì ë§Œì¡±ë„ ë‹¬ì„± (ì‚¬ìš©ì„± ì„¤ë¬¸ ì¡°ì‚¬ ê¸°ì¤€)</li>
</ul>
<h3>ì •ì„±ì  íš¨ê³¼</h3>
<ul>
<li><strong>ë°ì´í„° ë¯¼ì£¼í™”</strong>: ë¹„ê°œë°œìë„ ë³µì¡í•œ ë¶„ì„ ì¿¼ë¦¬ ìˆ˜í–‰ ê°€ëŠ¥</li>
<li><strong>í•™ìŠµ íš¨ê³¼</strong>: ìƒì„±ëœ SQLì„ í†µí•œ ìì—°ìŠ¤ëŸ¬ìš´ SQL í•™ìŠµ í™˜ê²½ ì œê³µ</li>
<li><strong>ì˜ì‚¬ê²°ì • ì†ë„</strong>: ì‹¤ì‹œê°„ ë°ì´í„° ì¡°íšŒë¡œ ë¹ ë¥¸ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ì‚¬ê²°ì • ì§€ì›</li>
<li><strong>ì—”ì§€ë‹ˆì–´ ìƒì‚°ì„±</strong>: ë°˜ë³µì ì¸ ë°ì´í„° ì¶”ì¶œ ì—…ë¬´ì—ì„œ í•´ë°©ë˜ì–´ ê³ ë¶€ê°€ê°€ì¹˜ ì—…ë¬´ ì§‘ì¤‘</li>
</ul>
<h3>ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜</h3>
<ul>
<li><strong>ì¸ë ¥ ë¹„ìš© ì ˆê°</strong>: ì›” 40ì‹œê°„ ì—…ë¬´ ì‹œê°„ ì ˆì•½ (ì•½ $2,000 ìƒë‹¹)</li>
<li><strong>ë¶„ì„ ì ‘ê·¼ì„±</strong>: ë°ì´í„° íŒ€ ì™¸ ì§ì›ë“¤ì˜ ë…ë¦½ì  ë¶„ì„ ëŠ¥ë ¥ í™•ë³´</li>
<li><strong>í’ˆì§ˆ í–¥ìƒ</strong>: í‘œì¤€í™”ëœ ì¿¼ë¦¬ í…œí”Œë¦¿ìœ¼ë¡œ ì¼ê´€ëœ ë¶„ì„ ê²°ê³¼</li>
<li><strong>í™•ì¥ì„±</strong>: ìƒˆë¡œìš´ ë„ë©”ì¸ ì§€ì‹ ì¶”ê°€ë¥¼ í†µí•œ ê¸°ëŠ¥ í™•ì¥ ê°€ëŠ¥</li>
</ul>
<h2>ë°°ìš´ ì ê³¼ í–¥í›„ ê°œì„  ë°©í–¥</h2>
<h3>ì£¼ìš” í•™ìŠµ ë‚´ìš©</h3>
<ol>
<li><strong>í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ì˜ ì¤‘ìš”ì„±</strong></li>
<li>ë„ë©”ì¸ íŠ¹í™” í”„ë¡¬í”„íŠ¸ê°€ ì¼ë°˜ì  í”„ë¡¬í”„íŠ¸ë³´ë‹¤ 30% ë†’ì€ ì •í™•ë„</li>
<li>
<p>ì»¨í…ìŠ¤íŠ¸ ì •ë³´ì˜ ì ì ˆí•œ ì–‘ê³¼ ì§ˆì´ ì„±ëŠ¥ì— ê²°ì •ì  ì˜í–¥</p>
</li>
<li>
<p><strong>ì‚¬ìš©ì ê²½í—˜ ì„¤ê³„ì˜ í•µì‹¬</strong></p>
</li>
<li>ì‹¤íŒ¨ ì¼€ì´ìŠ¤ì— ëŒ€í•œ ì¹œí™”ì  ì•ˆë‚´ê°€ ì‚¬ìš©ì ë§Œì¡±ë„ì— ì¤‘ìš”</li>
<li>
<p>ì‹œê°í™”ì™€ ì„¤ëª…ì´ ê²°í•©ëœ ê²°ê³¼ ì œì‹œì˜ íš¨ê³¼</p>
</li>
<li>
<p><strong>LLMì˜ í•œê³„ì™€ ë³´ì™„ ë°©ì•ˆ</strong></p>
</li>
<li>ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ì—¬ì „íˆ ì¸ê°„ì˜ ê²€ì¦ í•„ìš”</li>
<li>ë°˜ë³µ í•™ìŠµì„ í†µí•œ ë„ë©”ì¸ íŠ¹í™” ì„±ëŠ¥ í–¥ìƒ ê°€ëŠ¥</li>
</ol>
<h3>ì•„ì‰¬ìš´ ì ê³¼ ê°œì„  ê³¼ì œ</h3>
<h4>í˜„ì¬ ì‹œìŠ¤í…œì˜ í•œê³„</h4>
<ol>
<li><strong>ë³µì¡í•œ ì¡°ì¸ ì¿¼ë¦¬</strong>: 3ê°œ ì´ìƒ í…Œì´ë¸” ì¡°ì¸ ì‹œ ì •í™•ë„ í•˜ë½</li>
<li><strong>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§</strong>: ë³µì¡í•œ ê³„ì‚° ë¡œì§ì€ ì—¬ì „íˆ ìˆ˜ë™ ê°œì… í•„ìš”</li>
<li><strong>ì„±ëŠ¥ ìµœì í™”</strong>: ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ ì‘ë‹µ ì‹œê°„ ì§€ì—°</li>
<li><strong>ë‹¤êµ­ì–´ ì§€ì›</strong>: í•œêµ­ì–´ ì§ˆë¬¸ì˜ ë¯¸ë¬˜í•œ ë‰˜ì•™ìŠ¤ ì´í•´ í•œê³„</li>
</ol>
<h4>í–¥í›„ ê°œì„  ê³„íš</h4>
<p><strong>ë‹¨ê¸° ê°œì„  ì‚¬í•­ (3-6ê°œì›”)</strong>
- <strong>RAG ì‹œìŠ¤í…œ ë„ì…</strong>: ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í™œìš©í•œ ìŠ¤í‚¤ë§ˆ ì •ë³´ ê²€ìƒ‰ ê°•í™”
- <strong>ì¿¼ë¦¬ ìºì‹±</strong>: ìœ ì‚¬í•œ ì§ˆë¬¸ì— ëŒ€í•œ ê²°ê³¼ ìºì‹±ìœ¼ë¡œ ì‘ë‹µ ì†ë„ í–¥ìƒ
- <strong>A/B í…ŒìŠ¤íŠ¸</strong>: ë‹¤ì–‘í•œ í”„ë¡¬í”„íŠ¸ ì „ëµì˜ ì„±ëŠ¥ ë¹„êµ í…ŒìŠ¤íŠ¸</p>
<p><strong>ì¤‘ê¸° ê°œì„  ì‚¬í•­ (6-12ê°œì›”)</strong>
- <strong>íŒŒì¸íŠœë‹</strong>: ê²Œì„ ë„ë©”ì¸ íŠ¹í™” ëª¨ë¸ íŒŒì¸íŠœë‹ìœ¼ë¡œ ì •í™•ë„ í–¥ìƒ
- <strong>ë©€í‹°ëª¨ë‹¬</strong>: ì°¨íŠ¸ë‚˜ ê·¸ë˜í”„ ê¸°ë°˜ ì§ˆë¬¸ ì§€ì›
- <strong>ì‹¤ì‹œê°„ í•™ìŠµ</strong>: ì‚¬ìš©ì í”¼ë“œë°±ì„ í†µí•œ ì§€ì†ì  ëª¨ë¸ ê°œì„ </p>
<p><strong>ì¥ê¸° ë¹„ì „ (1-2ë…„)</strong>
- <strong>ì™„ì „ ìë™í™”</strong>: ë³µì¡í•œ ë¶„ì„ ë³´ê³ ì„œ ìë™ ìƒì„±
- <strong>ì˜ˆì¸¡ ë¶„ì„</strong>: ë‹¨ìˆœ ì¡°íšŒë¥¼ ë„˜ì–´ì„  ì˜ˆì¸¡ ë¶„ì„ ê¸°ëŠ¥
- <strong>ìì—°ì–´ ëŒ€ì‹œë³´ë“œ</strong>: ìŒì„± ëª…ë ¹ì„ í†µí•œ ëŒ€ì‹œë³´ë“œ ì œì–´</p>
<h3>ê¸°ìˆ  ìŠ¤íƒ ì§„í™” ë°©í–¥</h3>
<ul>
<li><strong>LangGraph</strong>: ë³µì¡í•œ ì›Œí¬í”Œë¡œìš°ë¥¼ ìœ„í•œ ê·¸ë˜í”„ ê¸°ë°˜ ì—ì´ì „íŠ¸</li>
<li><strong>Streamlit</strong>: ë” í’ë¶€í•œ ì‹œê°í™”ë¥¼ ìœ„í•œ ëŒ€ì‹œë³´ë“œ í†µí•©</li>
<li><strong>Vector Database</strong>: Pinecone/Weaviateë¥¼ í™œìš©í•œ ê³ ë„í™”ëœ RAG ì‹œìŠ¤í…œ</li>
</ul>
<p>ì´ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ LLMì„ í™œìš©í•œ ì‹¤ìš©ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ì†”ë£¨ì…˜ êµ¬ì¶• ê²½í—˜ì„ ìŒ“ì•˜ìœ¼ë©°, AI ê¸°ìˆ ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì ìš©ì—ì„œ ì¤‘ìš”í•œ ê²ƒì€ ê¸°ìˆ ì  ì •í™•ì„±ë¿ë§Œ ì•„ë‹ˆë¼ ì‚¬ìš©ì ê²½í—˜ê³¼ ì‹¤ë¬´ ì ìš©ì„±ì„ì„ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤. íŠ¹íˆ "ì™„ë²½í•˜ì§€ ì•Šë”ë¼ë„ ìœ ìš©í•œ" ì†”ë£¨ì…˜ì˜ ê°€ì¹˜ë¥¼ ê²½í—˜í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- Back to Projects -->
            <div class="text-center mt-12">
                <a href="/#projects" class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-full hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                    <i class="fas fa-arrow-left mr-3"></i>
                    í”„ë¡œì íŠ¸ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-gray-300">&copy; 2024 SeungHo Choi. All rights reserved.</p>
        </div>
    </footer>

    <!-- Prism.js for code highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

</body>
</html>